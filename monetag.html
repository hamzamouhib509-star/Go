<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ù…Ø´Ø§Ù‡Ø¯Ø© Ø¥Ø¹Ù„Ø§Ù† Monetag</title>

  <!-- 1) Ù…Ù„Ù Telegram Web App (Ù„Ø§Ø²Ù… Ù‚Ø¨Ù„ Ø£ÙŠ Ø³ÙƒØ±Ø¨Øª ÙŠØ³ØªØ®Ø¯Ù… Telegram.WebApp) -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <style>
    body { font-family: Arial, sans-serif; direction: rtl; text-align: center; padding: 20px; background:#f4f6f8; }
    .card { max-width:720px; margin:20px auto; background:#fff; border-radius:12px; padding:20px; box-shadow:0 6px 18px rgba(0,0,0,0.06); }
    #ad-box { min-height:260px; border:2px dashed #ddd; display:flex; align-items:center; justify-content:center; border-radius:8px; background:#fafafa; }
    button { margin-top:16px; padding:12px 18px; border-radius:8px; border:0; cursor:pointer; font-size:16px; }
    #watch-btn { background:#2b9cff; color:white; }
    #watch-btn[disabled] { opacity:0.5; cursor:not-allowed; }
    small { color:#666; display:block; margin-top:8px; }
  </style>
</head>
<body>
  <div class="card">
    <h2>ğŸ‘ï¸ Ø´Ø§Ù‡Ø¯ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† ÙˆØ§Ø±Ø³Ù„ ØªØ£ÙƒÙŠØ¯</h2>
    <div id="ad-box">
      <!-- Ù‡Ù†Ø§ Ø³ÙŠØ·Ø¨Ø¹ Ø§Ù„Ø³ÙƒØ±Ø¨Øª Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ (Ø¥Ø°Ø§ Ø¹Ù…Ù„ Ù…Ø¹ WebView) -->
      <div id="ad-content">Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†...</div>
    </div>

    <button id="watch-btn" disabled>Ø§Ù†ØªØ¸Ø± ... Ø³ÙŠØªÙ… Ø§Ù„ØªÙØ¹ÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹</button>
    <small>Ø¥Ø°Ø§ Ù„Ù… ÙŠØ¸Ù‡Ø± Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ø¬Ø±Ù‘Ø¨ ÙØªØ­ Ø§Ù„Ø±Ø§Ø¨Ø· ÙÙŠ Ù…ØªØµÙØ­ Ø¹Ø§Ø¯ÙŠ Ø£ÙˆÙ„Ø§Ù‹ Ù„Ù„ØªØ£ÙƒØ¯.</small>
  </div>

  <!-- ===  ÙƒÙˆØ¯ Monetag (Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø°ÙŠ Ø£Ø¹Ø·ÙŠØªÙ‡) === -->
  <script src='//libtl.com/sdk.js' data-zone='9910261' data-sdk='show_9910261'></script>

  <script>
    // ØªÙ‡ÙŠØ¦Ø© Telegram Web App
    const tg = window.Telegram && window.Telegram.WebApp ? window.Telegram.WebApp : null;

    // Ù…ÙÙŠØ¯ Ù„ØªØ¬Ø±Ø¨Ø© Ø£ÙˆÙ„ÙŠØ©: Ù†ÙØªØ­ Ø§Ù„ØµÙØ­Ø© Ø®Ø§Ø±Ø¬ Telegram Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†
    function enableWatchButton() {
      const btn = document.getElementById('watch-btn');
      btn.disabled = false;
      btn.textContent = "âœ… Ø£Ø¶ØºØ· Ù‡Ù†Ø§ Ø¥Ø°Ø§ Ø£Ù†Ù‡ÙŠØª Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©";
    }

    // Ù†Ø¨ÙŠ Ù†ÙØ¹Ù„ Ø§Ù„Ø²Ø± Ø¨Ø¹Ø¯ 20 Ø«Ø§Ù†ÙŠØ© (Ù…Ø«Ø§Ù„) â€” Ø¹Ø¯Ù‘Ù„ Ø§Ù„Ù‚ÙŠÙ…Ø© Ø­Ø³Ø¨ Ø­Ø§Ø¬ØªÙƒ
    setTimeout(() => {
      // Ù„Ùˆ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ø¸Ø§Ù‡Ø± Ù…Ù…ÙƒÙ† ØªÙØ¹Ù„ Ø§Ù„Ø²Ø± Ø¨Ø¹Ø¯ Ø²Ù…Ù† Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
      enableWatchButton();
    }, 20000); // 20000ms = 20 Ø«Ø§Ù†ÙŠØ©

    // Ø²Ø± Ø§Ù„Ø¥Ø¨Ù„Ø§Øº Ù„Ù„Ø¨ÙˆØª Ø£Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø´Ø§Ù‡Ø¯ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†
    document.getElementById('watch-btn').addEventListener('click', function () {
      const payload = {
        event: "ad_watched",
        zone: "9910261",
        ts: Date.now()
      };
      try {
        // 1) Ø£Ø±Ø³Ù„ Ø¨ÙŠØ§Ù†Ø§Øª ÙƒØ¨ÙØ³ÙÙŠØ· Ù„Ù„Ù†Øµ Ù„Ù„Ø¨ÙˆØª (Ø³ÙŠØµÙ„ ÙÙŠ msg.web_app_data.data)
        if (tg && tg.sendData) {
          tg.sendData(JSON.stringify(payload));
          // 2) Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…ÙŠÙ†ÙŠ Ø¢Ø¨ Ø¯Ø§Ø®Ù„ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…
          if (tg.close) tg.close();
        } else {
          // Ù„Ùˆ Ø§Ù„ØµÙØ­Ø© ÙØªØ­Øª ÙÙŠ Ù…ØªØµÙØ­ Ø¹Ø§Ø¯ÙŠØŒ Ù†Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø©
          alert("ØªÙ… (Ù…Ø­Ù„ÙŠØ§Ù‹): " + JSON.stringify(payload));
        }
      } catch (e) {
        console.error(e);
      }
    });

    // Ù…Ù„Ø§Ø­Ø¸Ø©: Ø¨Ø¹Ø¶ Ø´Ø¨ÙƒØ§Øª Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ù‚Ø¯ Ù„Ø§ ØªÙØ¹Ø±Ø¶ Ø¯Ø§Ø®Ù„ WebView Ù„ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù… => Ø¥Ø°Ø§ Ù„Ù… ÙŠØ¸Ù‡Ø± Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†ØŒ Ø§ÙØªØ­ Ø§Ù„Ø±Ø§Ø¨Ø· Ù…Ø¨Ø§Ø´Ø±Ø© ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­ Ù„Ù„ØªØ¬Ø±Ø¨Ø©.
  </script>
</body>
</html>
